# Ontario Nature Watch Environment Configuration
# ==============================================
# Copy this file to .env and fill in your actual values

# ============================================================================
# PROJECT CONFIGURATION
# ============================================================================
PROJECT_NAME="Ontario Nature Watch"
PROJECT_DESCRIPTION="Explore Ontario's natural heritage through AI-powered conversations"
REGION_FOCUS="Ontario, Canada"
ENVIRONMENT="development"  # development, staging, production

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
API_HOST="0.0.0.0"
API_PORT="8000"
DEBUG="true"  # Set to "false" in production

# Default map view (centered on Ontario)
DEFAULT_MAP_CENTER="44.5,-79.5"  # Latitude, Longitude (Ontario centroid)
DEFAULT_MAP_ZOOM="6"
DEFAULT_MAP_BOUNDS="-95.2,41.7,-74.3,56.9"  # West, South, East, North (Ontario bounds)

# Geographic filter (restrict all queries to Ontario)
GEOGRAPHIC_FILTER_ENABLED="true"
GEOGRAPHIC_FILTER_BOUNDS="-95.2,41.7,-74.3,56.9"

# ============================================================================
# DATABASE
# ============================================================================
# PostgreSQL with PostGIS
DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/ontario-nature-watch"
TEST_DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/ontario-nature-watch-test"

# Database connection pool
DB_POOL_MIN_SIZE="5"
DB_POOL_MAX_SIZE="20"

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Choose your LLM provider (openai, anthropic, ollama)
LLM_PROVIDER="anthropic"  # or "openai" or "ollama"

# OpenAI
OPENAI_API_KEY="sk-..."
OPENAI_MODEL="gpt-4"

# Anthropic
ANTHROPIC_API_KEY="sk-ant-..."
ANTHROPIC_MODEL="claude-sonnet-4-20250514"

# Ollama (for local development)
OLLAMA_BASE_URL="http://localhost:11434"
OLLAMA_MODEL="llama2"

# Model parameters
LLM_TEMPERATURE="0.1"  # Low temperature for factual responses
LLM_MAX_TOKENS="4096"

# ============================================================================
# ONTARIO DATA SOURCES
# ============================================================================
# Ontario GeoHub
ONTARIO_GEOHUB_BASE_URL="https://geohub.lio.gov.on.ca"
ONTARIO_GEOHUB_API_KEY=""  # Optional, may not be required for public data

# Conservation Ontario
CONSERVATION_ONTARIO_URL="https://co-opendata-camaps.hub.arcgis.com"
CONSERVATION_ONTARIO_API_KEY=""  # If required

# Great Lakes Information Network
GLIN_API_URL="http://gis.glin.net"
GLIN_API_KEY=""  # If required

# Ontario Data Catalogue
ONTARIO_DATA_CATALOGUE_URL="https://data.ontario.ca"

# ============================================================================
# VECTOR EMBEDDINGS
# ============================================================================
# For dataset RAG (Retrieval Augmented Generation)
EMBEDDING_PROVIDER="openai"  # openai, ollama, sentence-transformers
OPENAI_EMBEDDING_MODEL="text-embedding-3-small"
EMBEDDING_DIMENSION="1536"

# Vector database path (local)
VECTOR_DB_PATH="data/ontario-datasets-index"

# ============================================================================
# LANGFUSE (Observability)
# ============================================================================
LANGFUSE_ENABLED="true"
LANGFUSE_HOST="http://localhost:3000"  # Or cloud: https://cloud.langfuse.com
LANGFUSE_PUBLIC_KEY="pk-lf-..."
LANGFUSE_SECRET_KEY="sk-lf-..."

# ============================================================================
# CACHING
# ============================================================================
CACHE_ENABLED="true"
CACHE_TYPE="redis"  # redis or memory
REDIS_URL="redis://localhost:6379/0"
CACHE_TTL="3600"  # seconds (1 hour)

# Query result caching
QUERY_CACHE_ENABLED="true"
QUERY_CACHE_TTL="1800"  # 30 minutes

# ============================================================================
# FILE STORAGE
# ============================================================================
# For data downloads and processing
DATA_STORAGE_PATH="data/ontario"
DATA_CACHE_PATH="data/cache"

# S3-compatible storage (for production)
S3_ENABLED="false"
S3_ENDPOINT="https://s3.amazonaws.com"
S3_BUCKET="ontario-nature-watch-data"
S3_ACCESS_KEY=""
S3_SECRET_KEY=""
S3_REGION="ca-central-1"

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
FRONTEND_URL="http://localhost:3000"
API_URL="http://localhost:8000"

# CORS settings
CORS_ORIGINS="http://localhost:3000,http://localhost:8501"  # Comma-separated
CORS_ALLOW_CREDENTIALS="true"

# ============================================================================
# AUTHENTICATION (Optional)
# ============================================================================
AUTH_ENABLED="false"  # Enable for production
JWT_SECRET="your-secret-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_EXPIRATION="86400"  # seconds (24 hours)

# OAuth (if using)
OAUTH_PROVIDER=""  # google, github, etc.
OAUTH_CLIENT_ID=""
OAUTH_CLIENT_SECRET=""

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="json"  # json or text

# Sentry (error tracking)
SENTRY_ENABLED="false"
SENTRY_DSN=""

# Prometheus metrics
METRICS_ENABLED="true"
METRICS_PORT="9090"

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_REQUESTS="100"  # requests
RATE_LIMIT_WINDOW="60"  # seconds (per minute)

# ============================================================================
# DATA REFRESH SCHEDULE
# ============================================================================
# Cron expressions for automated data updates
DATA_REFRESH_ENABLED="true"
PARKS_REFRESH_SCHEDULE="0 2 * * 0"  # Every Sunday at 2 AM
CA_REFRESH_SCHEDULE="0 3 * * 0"  # Every Sunday at 3 AM
WATERSHEDS_REFRESH_SCHEDULE="0 4 * * 0"  # Every Sunday at 4 AM

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_FOREST_DATA="true"  # Enable forest data queries
FEATURE_SPECIES_DATA="false"  # Species at risk (may be restricted)
FEATURE_WATER_QUALITY="true"  # Great Lakes water quality
FEATURE_REAL_TIME_DATA="true"  # Real-time monitoring data

# ============================================================================
# ONTARIO-SPECIFIC SETTINGS
# ============================================================================
# Conservation Authorities
CA_COUNT="36"  # For validation
EXPECTED_CA_LIST="Toronto and Region,Credit Valley,Central Lake Ontario,Kawartha,Grand River,Saugeen Valley,Maitland Valley,Ausable Bayfield,St. Clair Region,Essex Region,Lower Thames Valley,Upper Thames River,Kettle Creek,Long Point Region,Grand River,Niagara Peninsula,Hamilton,Halton Region,Conservation Halton,Lake Simcoe Region,Nottawasaga Valley,Grey Sauble,Saugeen Valley,Maitland Valley,Ausable Bayfield,St. Clair Region,Mississippi Valley,Rideau Valley,South Nation,Raisin Region,Cataraqui Region,Quinte,Crowe Valley,Otonabee,Ganaraska Region,Central Lake Ontario,Kawartha"

# Provincial Parks
EXPECTED_PARK_COUNT_MIN="330"
EXPECTED_PARK_COUNT_MAX="350"

# Park classes
PARK_CLASSES="wilderness,natural_environment,waterway,recreational,nature_reserve,cultural_heritage,recreation_trail"

# Ontario Regions
ONTARIO_REGIONS="Southern Ontario,Central Ontario,Eastern Ontario,Northern Ontario,Far North"

# Great Lakes
GREAT_LAKES="Superior,Huron,Erie,Ontario"  # Note: Not Georgian Bay (part of Huron)

# ============================================================================
# LOCALIZATION
# ============================================================================
DEFAULT_LANGUAGE="en"  # English
SUPPORTED_LANGUAGES="en,fr"  # English, French (Ontario is officially bilingual)

# ============================================================================
# LEGAL & COMPLIANCE
# ============================================================================
# Data attribution
DATA_ATTRIBUTION="Contains information licensed under the Open Government Licence â€“ Ontario"
DATA_LICENSE_URL="https://www.ontario.ca/page/open-government-licence-ontario"

# Privacy policy
PRIVACY_POLICY_URL="https://ontario-nature-watch.org/privacy"
TERMS_OF_SERVICE_URL="https://ontario-nature-watch.org/terms"

# Data retention
USER_QUERY_RETENTION_DAYS="90"  # Keep user queries for 90 days
ANALYTICS_RETENTION_DAYS="365"  # Keep analytics for 1 year

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================
# Enable query debugging
QUERY_DEBUG="true"

# SQL query logging
SQL_ECHO="false"  # Set to "true" to log all SQL queries (verbose!)

# Show detailed error messages
DETAILED_ERRORS="true"  # Set to "false" in production

# Enable API documentation
ENABLE_API_DOCS="true"  # OpenAPI/Swagger UI at /docs

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# Spatial query optimization
SPATIAL_INDEX_THRESHOLD="1000"  # Use spatial index for queries with >1000 features
GEOMETRY_SIMPLIFICATION_TOLERANCE="0.0001"  # Simplify geometries for display

# Parallel processing
PARALLEL_WORKERS="4"  # Number of worker processes

# Request timeout
REQUEST_TIMEOUT="30"  # seconds

# ============================================================================
# EXAMPLE PROMPTS (for UI)
# ============================================================================
EXAMPLE_PROMPTS="Show me provincial parks in the Muskoka region|What Conservation Authority manages the Grand River watershed?|Find protected areas larger than 10,000 hectares in Northern Ontario|What is the forest composition of Algonquin Provincial Park?|Show me wetlands along Lake Huron|Find species at risk in the Niagara Escarpment"

# ============================================================================
# TESTING
# ============================================================================
TEST_MODE="false"
TEST_DATABASE_RESET="true"  # Reset test database before each test run
TEST_DATA_PATH="tests/fixtures"

# ============================================================================
# NOTES
# ============================================================================
# - All URLs should NOT have trailing slashes
# - Paths should use forward slashes (/) even on Windows
# - Boolean values should be "true" or "false" (lowercase)
# - Arrays/lists should be comma-separated with no spaces
# - Keep secrets secure! Never commit this file with real credentials
# - For production, use environment variables or secrets management
